{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
	<!--Import Google Icon Font-->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="{% static 'materialize/css/materialize.min.css' %}" media="screen,projection"/>
	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- bootstrap 4 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>

    <h1>유저 네임 : {{ nombre }}</h1> {#로그인 수정#}
    <h1>유저 네임 : {{ user }}</h1>
    <hr>
{#    <form method="post" action="{% url 'chat'  %}">#}
{#   <form method="post" action="{% url 'chat' nombre%}">#}
{#        {% csrf_token %}#}
{#            <input type="text" name="hoho" hidden value="{{ nombre }}"> 기존 유저 아이디 입력받는#}

{#             기본방 1,2,3#}
{#            <h2>default room number</h2>#}
{#            <input type="text" name="hoho" hidden value="{{ user }}">#}
{#            <button class="btn-primary" id="room1" value="room1">room1</button>#}
{#            <button class="btn-primary" id="room2" value="room2">room2</button>#}
{#            <button class="btn-primary" id="room3" value="room3">room3</button>#}

    <hr>
            <h2>local chat room</h2>
            {% for room in rooms %}
               <button class="btn-primary" id="{{ room.label }}" value="{{ room.label }}">{{ room.name }}</button>
            {% endfor %}
    <hr>
                <h2>1on1 chat</h2>
                <h1>유저 목록</h1>
                {% for userr in userList %}
                    <button class="btn-success"  value="{{ userr }}">{{ userr }}
                        <span class="badge badge-light text-primary" style="font-size: 2px;">
                             New 5
                        </span>
                    </button>
                    <br>
                {% endfor %}


{#             oneroom 리스트 싹다 출력#}
{#            <h1>OneRoom List</h1>#}
{#            {% for oneroom in onerooms %}#}
{#                <button class="btn-danger" id="{{ oneroom.pk }}" value="{{ oneroom.pk }}">{{ oneroom.users.all|join:", " }}</button>#}
{#            {% endfor %}#}

    <br><br><br>

    <!--Import jQuery before materialize.js-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="{% static 'materialize/js/materialize.min.js' %}"></script>

    <script>
    $(document).ready(function() {
        $(".btn-primary").click(function(e){
            e.preventDefault();
            var room_label = $(this).val(); //room.label을 받아서... room_name에 저장.
            //var name = '{{ nombre }}';
            var name = '{{ user }}'; //유저 아이디 넘겨줌.
            data={
                'room_label':room_label,
                'nombre': name,
             }
            console.log(room_label);
            window.location.pathname =  room_label+'/chat/'+name //url 형식에 유저

         });

        $(".btn-success").click(function(e){
            console.log("뭐지?")
            e.preventDefault();
            var target_name = $(this).val();
            var user = '{{ user }}';
            console.log(user);
            console.log(target_name);
            window.location.pathname =  user+'/chat/'+target_name

        });

        $(".btn-danger").click(function(e){
            e.preventDefault();
            var room_label = $(this).val(); //room.label을 받아서... room_name에 저장.
            //var name = '{{ nombre }}';
            var name = '{{ user }}'; //유저 아이디 넘겨줌.
            data={
                'room_label':room_label,
                'nombre': name,
             }
            console.log(room_label);
            window.location.pathname =  name+'/onechat/'+room_label //url 형식에 유저

         });

     });

    </script>



    <!-- bootstrap4 js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>


</body>
</html>
